<?php

namespace App\DataFixtures;

use App\Entity\Region;
use App\Entity\Owner;
use App\Entity\Room;
use App\Entity\User;
use Doctrine\Bundle\FixturesBundle\Fixture;
use Doctrine\Persistence\ObjectManager;
use Doctrine\Common\DataFixtures\DependentFixtureInterface;

class AppFixtures extends Fixture implements DependentFixtureInterface
{

    public function getDependencies()
    {
        return array('App\DataFixtures\UserFixtures');
    }

    /**
     * Generates initialization data for regions : [name, country_code, presentation]
     * @return \\Generator
     */
    private static function regionDataGenerator()
    {
        yield ["Ile de France", 'FR', 'iledefrance.png', "L\'Île-de-France est une région historique et administrative française. Il s\'agit d'une région très fortement peuplée, qui représente à elle seule 18,8 % de la population de la France métropolitaine sur seulement 2,2 % de sa superficie, ce qui en fait la région la plus peuplée (12,12 millions d'habitants en 2016) et la plus densément peuplée (1 006 hab/km2) de France. Ses habitants sont appelés les Franciliens. Parfois désignée par son ancien nom de « région parisienne », elle est fortement centralisée sur l'agglomération parisienne, qui s'étend sur 23,7 % de la surface régionale, mais où habite 88,6 % de sa population. L'aire urbaine de Paris (qui correspond à la notion de bassin d\'emploi) recouvre, quant à elle, la quasi-totalité de la superficie francilienne et des portions de régions limitrophes."];
        yield ['Nouvelle-Aquitaine', 'FR', 'nouvelleaquitaine.png', "La Nouvelle-Aquitaine Écouter est une région administrative française, créée par la réforme territoriale de 2015 et effective au 1er janvier 2016, après les élections régionales de décembre 2015. Résultant de la fusion des anciennes régions Aquitaine, Limousin et Poitou-Charentes, elle a été dénommée à ses débuts Aquitaine-Limousin-Poitou-Charentes. Elle regroupe douze départements, s’étend sur 84 036 km2 (soit un huitième du territoire national) et compte 5 911 482 habitants (population municipale au 1er janvier 2015)3. Elle forme la plus vaste région de France (métropole et outre-mer confondus), avec une superficie supérieure à celle de l’Autriche. Sa plus grande ville qui est en même temps la capitale régionale, Bordeaux, est au cœur d’une agglomération de plus de 925 000 habitants, la septième au niveau national. Seule structure intercommunale de la région à avoir le statut de métropole — créée par la loi de modernisation de l'action publique territoriale et d'affirmation des métropoles — Bordeaux Métropole a vu le jour le 1er janvier 2015."];
        yield ['Disneyland', 'FR', 'disney.jpg', "Disneyland Paris, anciennement Euro Disney Resort puis Disneyland Resort Paris, est un complexe touristique et urbain de 22,30 km2 (2 230 ha) situé en sa majeure partie sur la commune de Chessy (Seine-et-Marne), à trente-deux kilomètres à l'est de Paris. Le complexe touristique, ouvert en 1992, comprend deux parcs à thèmes : le parc Disneyland et le parc Walt Disney Studios, ainsi que sept hôtels et un golf, tandis que le complexe urbain intensifie le tissu du secteur IV de Marne-la-Vallée au travers de Val d'Europe Agglomération. Le site est favorisé par de nombreux transports, dont le prolongement de la ligne A du RER d'Île-de-France en service depuis le 1er avril 1992 et financé par le conseil régional, des infrastructures routières comme la bretelle de liaison avec l'autoroute A4, ainsi qu'une gare TGV subventionnée par l'État français et inaugurée le 29 mai 1994 qui relie le complexe aux principales villes françaises et européennes."];
        yield ['Londres', 'GB', 'londres.jpeg', "Londres est la capitale et la plus grande ville d'Angleterre et du Royaume-Uni. La ville est située près de l'estuaire de la Tamise dans le sud-est de l'Angleterre. Londinium a été fondée par les Romains il y a presque 2 000 ans6. La Cité de Londres, le noyau historique de Londres avec une superficie de seulement 1,12 miles carrés (2,9 km2) conserve des frontières qui suivent de près ses limites médiévales. Londres est gouvernée par le maire de Londres et l'Assemblée de Londres."];
        yield ['New York', 'US', 'nyc.jpg', "New York, officiellement nommée City of New York, connue également sous les noms et abréviations de New York City ou NYC (pour éviter la confusion avec l'État de New York), et dont le surnom le plus connu est The Big Apple (« La grosse pomme »), est la plus grande ville des États-Unis en nombre d'habitants et l'une des plus importantes du continent américain et du monde. Elle se situe dans le Nord-Est du pays, sur la côte atlantique, à l'extrémité sud-est de l'État de New York. La ville de New York se compose de cinq arrondissements appelés boroughs : Manhattan, Brooklyn, Queens, le Bronx et Staten Island. Ses habitants s'appellent les New-Yorkais (en anglais : New Yorkers)."];
        yield ['Amérique du Nord', 'US', 'amdunord.jpg', "L’Amérique du Nord est un continent à part entière ou un sous-continent de l'Amérique suivant le découpage adopté pour les continents. Elle est entourée par l'océan Pacifique à l'ouest, l'océan Arctique au nord et l'océan Atlantique à l'est. L'isthme de l'Amérique centrale la relie à l'Amérique du Sud. Les Caraïbes, région quelquefois incluse dans l'Amérique du Nord, ferment le golfe du Mexique."];
        yield ['Canada', 'CA', 'canada.jpg', "Le Canada est un pays situé dans la partie septentrionale de l'Amérique du Nord. Monarchie constitutionnelle à régime parlementaire, il est constitué en fédération rassemblant dix provinces et trois territoires. Le pays est encadré par l'océan Atlantique à l'est, l'océan Arctique au nord et l'océan Pacifique à l'ouest. Le Canada comprend deux frontières terrestres avec les États-Unis, l'une au sud et l'autre au nord-ouest avec l'Alaska, ainsi qu'une frontière maritime avec la France, par le biais de l'archipel de Saint-Pierre-et-Miquelon, et le Danemark, par le biais du Groenland. Le territoire terrestre canadien s'étend sur 10 millions de kilomètres carrés, ce qui en fait le deuxième pays du monde pour la superficie après la Russie7. En 2019, il compte plus de 37 millions d'habitants1 et est ainsi le 37e pays du monde en ce qui concerne la population. Le territoire contient plus de 31 700 lacs8, ce qui fait du Canada l'un des pays possédant les plus grandes réserves d'eau douce du globe9,10. Les langues officielles au niveau fédéral sont l'anglais et le français. La capitale fédérale est Ottawa et la monnaie, le dollar canadien."];
        yield ['Bavière', 'DE', 'baviere.jpg', "La Bavière (en allemand : Bayern), officiellement appelée État libre de Bavière (Freistaat Bayern), est située dans le Sud-Est de l'Allemagne et est un des seize Länder allemands. Sa capitale est Munich. Elle est nommée Boiaria, Bajuvaria ou simplement Bavaria en latin, Bayern en allemand. Ces noms viennent du peuple des Bavarii ou Baiuvarii (nom transcrit aussi en « Bajuvares » ou « Bayouvares ») qui l’ont occupée. La population se compose de plus de 13 millions d’habitants, soit 16 % de la population fédérale allemande (2e sur 16), dont 1,2 million d’étrangers, soit 10 % de la population du Land."];
        yield ['Berlin', 'DE', 'berlin.jpg', "Berlin est la capitale4 et la plus grande ville d'Allemagne. Institutionnellement, c’est une ville-État nommée Land de Berlin. Située dans le Nord-Est du pays, Berlin compte environ 3,8 millions d'habitants1, sur 892 km2. Ses habitants s'appellent les Berlinois et les Berlinoises (die Berliner et die Berlinerinnen en allemand). Elle est la première ville et la huitième agglomération la plus peuplée de l'Union européenne. L'agglomération de Berlin s'étend sur 3 743,31 km2, et compte 4,4 d'habitants (à titre de comparaison, la Métropole du grand Paris s'étend sur 814 km2 et compte sept millions d'habitants, l'agglomération parisienne en compte 10,8 répartis sur 2 853 km2). La région métropolitaine de Berlin-Brandebourg qui cumule les Länder de Berlin et de Brandebourg regroupe au total près de six millions d'habitants."];
        yield ['Essonne', 'FR', 'essone.jpg', "Le département de l'Essonne est un département français situé au sud de Paris, dans la région Île-de-France, pour partie intégré à l'agglomération parisienne, qui tire son nom de la rivière Essonne dont le cours traverse le territoire selon un axe sud-nord jusqu’à la confluence avec la Seine. Officiellement créé le 1er janvier 1968 par démembrement de l'ancienne Seine-et-Oise, il porte le code Insee et postal 91 et couvre un territoire de 1 804 km2 occupé en 2018 par 1 296 641 habitants. Son chef-lieu est Évry-Courcouronnes (Évry jusque fin 2018). Ses habitants sont appelés les Essonniens2."];
        yield ['Télécom SudParis', 'FR', 'tsp.png', "Télécom SudParis (anciennement « Télécom INT ») est l'une des 204 écoles d'ingénieurs françaises accréditées au 1er septembre 2020 à délivrer un diplôme d'ingénieur2 et est un « établissement-composante » de l'Institut Polytechnique de Paris3 aux côtés de l’Ecole Polytechnique, l’ENSTA Paris, l’ENSAE Paris et Télécom Paris. Télécom SudParis est une grande école d’ingénieurs en sciences et technologies du numérique. Elle forme des ingénieurs et des docteurs innovants et entreprenants, alliant capacités conceptuelles et opérationnelles, fortement appréciés en France et à l’international dans tous les secteurs d’activité. Elle mène une recherche de haut niveau en lien étroit avec les entreprises et contribue à l’innovation dans les sciences et technologies du numérique. Ses domaines d’excellence scientifique répondent aux défis majeurs de la transition numérique (notamment cybersécurité, science des données et intelligence artificielle, réseaux et internet des objets, multimedia), mais intègrent également des applications pour l’industrie et la ville du futur ainsi que l’environnement et la santé. Cette école publique d'ingénieurs fait partie de l’Institut Mines-Télécom, établissement sous tutelle des ministères chargés de l’industrie et des communications électroniques, qui constitue le premier groupe français d’écoles d’ingénieurs et de management et est un institut national de science et technologie, de nature fédérale, déployé sur les territoires au travers de ses écoles et à visibilité internationale. L’IMT a été créé le 1er mars 2012 avec le statut d’EPSCP grand établissement, par le décret n° 2012-279."];
        yield ['État de New York', 'US', 'ny.png', "L'État de New York (en anglais : State of New York) est un État des États-Unis, quatrième plus peuplé du pays avec 19,5 millions d'habitants en 2019. Il se trouve dans le nord-est du pays et a pour capitale la ville d'Albany, située dans le nord-est de l'État. Vers le nord et l'ouest, son territoire s'élargit et partage une longue frontière avec le Canada (provinces de l'Ontario et du Québec), dont une grande partie est constituée par les lacs Érié et Ontario. À l'est, il est bordé par le Vermont, le Massachusetts, le Connecticut, tandis qu'au sud, il partage une frontière avec le New Jersey et la Pennsylvanie."];
        yield ['Honduras', 'HN', 'honduras.jpg', "Le Honduras, en forme longue la république du Honduras, en espagnol República de Honduras, est un pays situé en Amérique centrale, limité au nord par la mer des Caraïbes, qui compte de nombreuses îles, cayes et îlots, dont les plus importants sont les Islas de la Bahía et les îles du Cygne. Le Honduras est bordé à l'ouest par le Guatemala et au sud-ouest par le golfe de Fonseca, au sud-ouest par le Salvador et au sud par le Nicaragua. Le Honduras était le pays le plus inégalitaire d’Amérique latine en 2016."];
        yield ['Tegucigalpa', 'HN', 'tegu.jpg', "Tegucigalpa (prononciation espagnole : /teɣusiˈɣalpa/) ou Tégucigalpa2 est la capitale et la ville la plus importante du Honduras. D'après des estimations, sa population s'élève en 2011 à 1 090 000 d'habitants1. Les habitants de Tegucigalpa sont les Tegucigalpais."];
        yield ['Arcachon', 'FR', 'arca.jpg', "Arcachon est une commune du Sud-Ouest de la France, sous-préfecture du département de la Gironde, en région Nouvelle-Aquitaine. Elle a été créée en 1857 par détachement d'une partie de la commune de La Teste-de-Buch. Partie intégrante de l'ancienne province de Gascogne, elle s'inscrit dans le périmètre du Pays de Buch, des Landes de Gascogne et de la forêt des Landes. Ville éponyme du bassin d'Arcachon, mais non la plus peuplée avec une population de 11 567 habitants en 2018, elle est au centre d'une aire urbaine de 65 500 habitants (en 2015), elle est une des grandes stations balnéaires de la côte atlantique, aux côtés de Royan, Biarritz, Les Sables-d’Olonne ou La Baule."];
        yield ['Paris 15e', 'FR', 'paris15.jpg', "Le 15e arrondissement de Paris est l’un des vingt arrondissements de Paris. Il est situé sur la rive gauche de la Seine, dans le sud-ouest de la ville, et est le résultat de l’annexion des communes de Vaugirard et de Grenelle en 1860. Il s’agit du plus peuplé des arrondissements avec 235 178 habitants en 20171."];
        yield ['Australie', 'AU', 'australie.jpg', "L'Australie, en forme longue le Commonwealth d'Australie (en anglais : Australia et Commonwealth of Australia), est un pays de l'hémisphère sud dont la superficie couvre la plus grande partie de l'Océanie. En plus de l'île éponyme, l'Australie comprend également la Tasmanie ainsi que d’autres îles des océans Austral, Pacifique et Indien. Elle revendique aussi 6 000 000 km2 en Antarctique. Les nations voisines comprennent notamment l'Indonésie, le Timor oriental et la Papouasie-Nouvelle-Guinée au nord, les îles Salomon, Vanuatu et le territoire français de Nouvelle-Calédonie au nord-est, la Nouvelle-Zélande au sud-est ainsi que le territoire français des îles Kerguelen (TAAF) à l'ouest des îles australiennes Heard-et-McDonald."];
        yield ['Mer Méditerranée', 'FR', 'mediter.jpg', "La mer Méditerranée (prononcé [me.di.tɛ.ʁa.ne]) est une mer intercontinentale presque entièrement fermée, bordée par les côtes d'Europe du Sud, d’Afrique du Nord et d’Asie de l'Ouest, depuis le détroit de Gibraltar à l'ouest aux entrées des Dardanelles et du canal de Suez à l'est. Elle s’étend sur une superficie d’environ 2,5 millions de kilomètres carrés. Son ouverture vers l’océan Atlantique par le détroit de Gibraltar est large de 14 kilomètres."];
        yield ['Corse', 'FR', 'corse.jpeg', "La Corse (en corse et en italien : Corsica ; en ligure : Còrsega) est une île située en mer Méditerranée et une collectivité territoriale unique française. Quatrième île de la mer Méditerranée par sa superficie, la Corse a été rattachée durant près de quatre siècles à la république de Gênes avant une brève indépendance comme royaume de Corse du 15 avril 1736 au mois de décembre 1740. En 1755, elle adopte la première constitution démocratique de l'histoire moderne et donne pour la première fois en partie le droit de vote aux femmes. Le 15 mai 1768, elle est cédée par la République de Gênes à la France, bien que Gênes n'ait qu'une emprise limitée sur l'île depuis la déclaration d'indépendance de la République corse en 1755. Elle est conquise militairement par le Royaume de France lors de la bataille de Ponte-Novo, le 9 mai 1769."];
    }

    /**
     * Generates initialization data for rooms
     * @return \\Generator
     */
    private static function roomDataGenerator()
    {
        $text = "Une gamme complète de solutions pour stocker vos données. Les données stockées et leurs différentes utilisations ont des contraintes spécifiques et nécessitent une solution adaptée. Que vous ayez besoin d'une solution de stockage d'objets, de stockage en bloc, d'un espace d'archivage à long terme ou d'une solution de sauvegarde pour les volumes et les instances Public Cloud, OVHcloud propose des solutions de stockage cloud pour répondre à tous vos besoins. Nos solutions de stockage cloud offrent des performances, une sécurité et une protection des données exceptionnelles, ce qui les rend idéales pour le stockage cloud professionnel. Et pour que vous gardiez un contrôle total sur vos données, OVHcloud garantit la réversibilité : vous pouvez récupérer vos données à tout moment sans aucun problème. Des volumes de stockage sécurisés et flexibles, disponibles à la demande. Lorsque les besoins en stockage persistant deviennent importants, l'ajout de disques additionnels permet de répondre instantanément à la demande en augmentant à chaud la capacité des instances. Ces volumes sont hébergés de manière sécurisée dans nos clusters et permettent de répondre aux exigences d'applications qui manipulent des quantités importantes de données. Les clusters qui hébergent les volumes distribuent trois réplicas de chaque donnée sur des disques distincts. Mieux qu'un système RAID classique, les informations sont ici réparties dans des serveurs différents. Cela permet d'assurer la pérennité des données en toute situation. Ceph est une technologie open source. Celle-ci permet d'exploiter d'importantes infrastructures dans des contextes industriels exigeants, en assurant la scalabilité des clusters ainsi que la fiabilité du service. OVH est partenaire de la fondation Ceph et investi dans le développement de cette brique essentielle pour OVHcloud. Nos infrastructures et services cloud sont certifiés ISO/IEC 27001, 27017, 27018 et 27701. Notre certification HDS vous permet d’héberger en toute sécurité des données de santé. Privilégiant le rapport prix-Go, les volumes « classic » sont idéaux pour stocker de grandes quantités de données sans besoin particulier en matière de performance. Les volumes « high speed » permettent de répondre aux besoins où le stockage doit être accompagné de performances en lecture et écriture. Les volumes « high speed gen2 » permettent d’obtenir la performance dont vous avez besoin en termes d’IOPS et de bande passante. Les volumes disposent de 1 Go à 4 To. Vous pouvez commencer par un petit espace, puis augmenter sa taille en fonction de l'évolution de vos besoins. Les volumes peuvent être attachés et détachés à chaud. Il est également possible d'utiliser un volume pour déplacer des données d'une instance à l'autre, au sein d'une même localisation, de manière quasi instantanée. Déclenchez des snapshots à tout instant pour figer l'état des données tout en continuant d'utiliser votre volume. Vous pourrez par la suite retrouver vos informations dans l'état souhaité. Conformément à sa politique de réversibilité, OVH vous permet de récupérer votre volume simplement, tel quel, en utilisant des outils classiques comme la CLI d'OpenStack. Vous avez également la possibilité d'importer un volume sur la plateforme d'OVH pour l'exploiter directement sur vos instances. Les volumes sont facturés au Go par heure, en fonction de la gamme choisie. Les tarifs annoncés sont ceux d'un Go utilisé pendant un mois complet. Block Storage est une solution vous permettant de stocker vos données sur des disques attachés à vos instances par blocs sur des baies de stockage. Vos informations sont réparties sur des disques indépendants de votre machine. Ainsi, vous contrôlez votre capacité de stockage par l’ajout de disques selon vos besoins. Le cloud block storage est un système de stockage persistant avec une triple réplication des données pour plus de résilience. Vous avez aussi la possibilité de capturer vos volumes Block Storage avec la solution Volume Snapshot. En prenant un « instantané » à un moment précis de toutes les données contenues dans votre Block Storage, vous pouvez les restaurer intégralement à partir de cette sauvegarde en cas de besoin. Grâce à son système de stockage par blocs, le cloud block storage est idéal pour entreposer un grand volume de données. En effet, l’ajout de disques permet d’augmenter votre capacité d’hébergement, selon vos besoins. De plus, la rapidité et la redondance de ce système facilitent la manipulation des données. En effet, le stockage par blocs distincts simplifie la configuration et la modification de vos informations, tout en assurant une expérience utilisateur optimale grâce à leur haute disponibilité. Le cloud block storage représente également un gage de résilience supplémentaire, grâce à la redondance de notre système de stockage par blocs. Celui-ci assure la conservation des données en cas de défaillance d’un des disques ou d’une machine. Le SLA est de 99,9 % de disponibilité mensuelle quant à l'accès au service Block Storage. Pour plus d'informations, veuillez consulter les conditions générales de vente. Le taux de résilience des données est de 100 % sur le service Block Storage. Pour plus d'informations, veuillez consulter les conditions générales de vente. Oui, il est possible d'agrandir un volume. S'il est formaté par un système de fichiers, il vous suffira de l'étendre ensuite. Cette manipulation est possible grâce à une opération d'export-import qui passe par le catalogue d'images. Cette manipulation est possible grâce à une opération d'export-import qui passe par le catalogue d'images. Il est conseillé de ne pas dépasser les 4 To par volume. La solution Public Cloud est disponible en Europe (Gravelines, Strasbourg, Londres, Francfort, Varsovie), en Amérique du Nord (Beauharnois) et en Asie-Pacifique (Sydney, Singapour). La nouvelle offre High Speed Gen2 repose sur un hardware intégrant des disques SSD à interfaces NVMe. L’allocation de la performance est progressive et linéaire (30 IOPS alloués par Go et 0,5 MB/s alloué par Go) avec un maximum de 20k IOPS et 1 GB/s par volume. Vos performances en termes d’IOPS et de BP augmentent avec la mise à l’échelle de votre espace de stockage. Sur l’offre High Speed, la performance est fixe. Vous obtiendrez jusqu’à 3000 IOPS par volume, qu’importe la taille du volume. Les performances de High Speed sont théoriquement meilleures pour les volumes jusqu’à 100Go. Au-delà de 100 Go par volume, la performance sera meilleure avec un volume de type High Speed Gen2.";
        $titles = ['Un stockage pas cher pour toutes vos données', 'Venez stocker vos données ici', 'Data here', 'Storage here', 'Please use me', 'Pas cher', 'Cher et nul', 'OVH Block Storage', 'Scaleway Object Storage', 'Pour perdre vos données ici', 'Stocker vos photos', 'Plein de place', 'Pas de stockage illégal plz', 'almacenamiento de datos', 'Bon serveur', 'Joli serveur', 'Serveur chaud dans ta région'];
        $addresses = ['5 rue Charles Fourier 91000 Evry Courcouronnes', '36 quai des orfevres 75000 Paris', '4 rue de rivoli 75000 Paris'];
        $server_count = 12;

        foreach (self::regionDataGenerator() as [$name, $country_code, $image_name, $presentation])
        {
            for ($i = 0; $i <= rand(2, 12); $i++)
            {
                yield [$titles[rand(0, count($titles)-1)], rand(0, 999), rand(0, 12000), rand(1, 50), $addresses[rand(0, count($addresses)-1)], 'anna@localhost', rand(1, $server_count).'.jpg', $text];
            }
        }
    }

    public function load(ObjectManager $manager)
    {
        $regionRepo = $manager->getRepository(Region::class);
        $userRepo = $manager->getRepository(User::class);

        foreach (self::regionDataGenerator() as [$name, $country_code, $image_name, $presentation])
        {
            $region = new Region();
            $region->setCountry($country_code);
            $region->setPresentation($presentation);
            $region->setName($name);
            $region->setImageName($image_name);
            $manager->persist($region);
        }
        $manager->flush();

        foreach (self::roomDataGenerator() as [$summary, $capacity, $superficy, $price, $address, $user_email, $image_name, $description])
        {
            $room = new Room();
            $room->setSummary($summary);
            $room->setDescription($description);
            $room->setCapacity($capacity);
            $room->setSuperficy($superficy);
            $room->setPrice($price);
            $room->setAddress($address);
            $room->setImageName($image_name);
            
            $user = $userRepo->findOneBy(['email' => $user_email]);
            $room->setUser($user);

            foreach (self::regionDataGenerator() as [$region_name, $country_code, $in, $p])
            {
                if (rand(0, 1) < 1)
                {
                    $region = $regionRepo->findOneBy(['name' => $region_name, 'country' => $country_code]);
                    $room->addRegion($region);
                }
            }

            $manager->persist($room);
        }

        $manager->flush();
    }
}
